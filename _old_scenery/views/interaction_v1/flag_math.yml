set_up_test_data:
  - reset_db
  - create_testuser: !common-item TESTUSER

set_up:
  - login: !common-item CREDENTIALS

# variables:
#   - &answer_data
#     !common-item 
#       ID: INTERACTION_BASE
#       interaction_ftype: maths_
#       fragment_pos: 2
#       fragment_id: 2 


cases:
  PERFECT_MATHS:
    answer:
      !common-item 
        ID: INTERACTION_BASE
        interaction_ftype: maths_
        fragment_pos: 2
        fragment_id: 2
        user_answer_latex: "-126"
        flag: 30


  WRONG_MATHS:
    answer:
      !common-item 
        ID: INTERACTION_BASE
        interaction_ftype: maths_
        fragment_pos: 2
        fragment_id: 2
        user_answer_latex: "-125"
        flag: 31


  ONLY_CORRECT_MATHS:
    answer:
      !common-item 
        ID: INTERACTION_BASE
        interaction_ftype: maths_
        fragment_pos: 2
        fragment_id: 2
        user_answer_latex: "-126-0"
        flag: 32

scene:
  method: POST
  url: app:interaction_v1
  url_parameters: 
    origin: tests/tests/0-04
    id_or_pos_min: 2
  data: !case answer
  directives:
    - status_code: 201
    - count_instances:
        model: UserInteraction
        n: 1
    - dom_element:
        find:
          id: flag-2-dynamic
        attribute: 
          name: data-flag
          value: !case answer:flag





