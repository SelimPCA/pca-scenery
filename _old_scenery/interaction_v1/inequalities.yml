set_up_test_data:
  - reset_db
  - create_testuser: !common-item TESTUSER

set_up:
  - login: !common-item CREDENTIALS

# variables:
#   - &answer_data
#     !common-item 
#       ID: INTERACTION_BASE
#       interaction_ftype: maths_
#       fragment_pos: 2
#       fragment_id: 2 


cases:
  2_PERFECT_MATHS:
    answer:
      !common-item 
        ID: INTERACTION_BASE
        interaction_ftype: maths_
        fragment_pos: 2
        fragment_id: 2
        user_answer_latex: "0<x+1<1"
        flag: 30
        flag_id: flag-2-dynamic

  4_PERFECT_MATHS:
    answer:
      !common-item 
        ID: INTERACTION_BASE
        interaction_ftype: maths_
        fragment_pos: 4
        fragment_id: 4
        user_answer_latex: "]-1,0["
        flag: 30
        flag_id: flag-4-dynamic

scene:
  method: POST
  url: app:interaction_v1
  url_parameters: 
    origin: tests/tests/0-08
    id_or_pos_min: !case answer:fragment_pos
  data: !case answer
  directives:
    - status_code: 201
    - count_instances:
        model: UserInteraction
        n: 1
    - dom_element:
        find:
          id: !case answer:flag_id
        attribute: 
          name: data-flag
          value: !case answer:flag

